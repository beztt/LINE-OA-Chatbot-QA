# def build_rephrase_prompt(user_question: str, matched_qa: dict) -> str:
#     return f"""ผู้ใช้ถามว่า:
# "{user_question}"

# จากฐานข้อมูล Q&A มีรายการที่ใกล้เคียงที่สุดคือ:
# Q: "{matched_qa['question']}"
# A: "{matched_qa['answer']}"

# กรุณาช่วยตอบผู้ใช้โดยใช้ข้อมูลจาก A เดิม แต่งให้เข้ากับภาษาของผู้ใช้ โดยอย่ากล่าวถึง Q&A เดิมโดยตรง และให้ตอบแบบสุภาพเข้าใจง่าย ใช้คำลงท้ายด้วย "ครับ" :
# """

def build_rephrase_prompt(user_question: str, matched_qa: dict) -> list:
    return [
        {
            "role": "system",
            "content": (
                "คุณคือแชทบอทที่ช่วยตอบคำถามจากฐานข้อมูลระบบบริษัท "
                "ตอบด้วยภาษาสุภาพ อ่านง่าย ใช้คำลงท้ายว่า 'ครับ' เท่านั้น "
                "ห้ามพูดถึงคำถามต้นฉบับโดยตรง และห้ามใช้คำว่า 'ค่ะ', 'จ้า', 'ครับ/ค่ะ'"
            )
        },
        {
            "role": "user",
            "content": (
                f"คำถามจากผู้ใช้: {user_question}\n\n"
                f"คำถามเดิมจากฐานข้อมูล: {matched_qa['question']}\n\n"
                f"คำตอบเดิมจากฐานข้อมูล: {matched_qa['answer']}\n\n"
                f"โปรดตอบใหม่ให้เหมาะกับคำถามนี้ โดยใช้ข้อมูลจากคำตอบเดิม"
            )
        }
    ]

